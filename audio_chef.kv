#:kivy 2.0.0

<AudioChefWindow>:
    orientation: 'vertical'
    BoxLayout:
        BoxLayout:
            orientation: 'vertical'
            BoxLayout:
                Label:
                    text: "Welcome to AudioChef.\nIn the future you'll be able to create recipes for me to cook"
                    text_size: self.width, None
                    size: self.texture_size
                Button:
                    text: "GO"
                    height: 50
                    size_hint_y: None
                    on_release: root.execute_recipe()
            Label:
                text: 'Messages:'
                text_size: self.width, None
                size: self.texture_size
            Label:
                id: messages_label
                text_size: self.width, None
                size: self.texture_size
        BoxLayout:
            orientation: 'vertical'
            OptionsBox:
                id: ext_box
            OutputNameChanger:
                id: name_changer
                preview_callback: root.filename_preview
    Label:
        text: "The files you chose are:"
        height: 30
        size_hint_y: None
    ScrollView:
        GridLayout:
            cols: 2
            id: file_box
            size_hint_y: None
    BoxLayout:
        height: 50
        size_hint_y: None
        cols: 2
        Label:
            text: "Added transformations:"
        Button:
            text: '+'
            on_release: root.open_transformation_popup()
    ScrollView:
        Accordion:
            id: transforms_box
            orientation: 'vertical'

<TransformationPopup>:
    BoxLayout:
        orientation: 'vertical'
        TransformationForm:
            id: tranform_form
        Button:
            text: 'Cancel'
            on_release: root.dismiss()
        Button:
            text: 'Add'
            on_release: root.confirm()

<TransformationForm>:
    orientation: 'vertical'
    ScrollView:
        height: 50
        size_hint_y: None
        BoxLayout:
            id: transform_box
            size_hint_x: None
    ScrollView:
        height: 50
        size_hint_y: None
        BoxLayout:
            id: args_box
            size_hint_x: None

<SelectableButton>:
    width: max(120, self.texture_size[0])
    size_hint_x: None

<Button>:
    background_color: 'grey'


<OutputNameChanger>:
    orientation: 'vertical'
    GridLayout:
        cols: 2
        Label:
            text: 'Choose file name change type:'
        Label:
        Label:
            text: 'Replace text'
        CheckBox:
            active: True
            group: 'name_changer'
            on_active: root.mode = 'replace'
        Label:
            text: 'Wildcards'
        CheckBox:
            group: 'name_changer'
            on_active: root.mode = 'wildcards'
    RelativeLayout:
        GridLayout:
            cols: 2
            Label:
                id: replace_from_label
                height: 25
                size_hint_y: None
                text: 'Replace this:'
            Label:
                id: replace_to_label
                height: 25
                size_hint_y: None
                text: 'With this:'
            TextInput:
                id: replace_from_input
                height: 25
                size_hint_y: None
                on_text: root.preview_callback()
            TextInput:
                id: replace_to_input
                height: 25
                size_hint_y: None
                text: ''
                on_text: root.preview_callback()
        BoxLayout:
            orientation: 'vertical'
            Label:
                id: wildcards_label
                height: 25
                size_hint_y: None
                text: 'Output Format:'
            TextInput:
                id: wildcards_input
                height: 25
                size_hint_y: None
                on_text: root.preview_callback()



<ValidatedInput>:
    size_hint_y: None
    height: input_label.height
    Label:
        id: input_label
        text: root.name
        text_size: self.width, None
        height: max(50, self.texture_size[1])
        size_hint_y: None
    TextInput:
        id: text_input
        text: root.text
        height: input_label.height
        size_hint_y: None
        on_text: root.text = self.text


<ArgumentBox>:
    width: 180
    size_hint_x: None


<FileLabel>:
    text_size: self.width, None
    size: self.texture_size