#:kivy 2.0.0

<AudioChefWindow>:
    orientation: 'vertical'
    BoxLayout:
        orientation: 'vertical'
        height: 175
        size_hint_y: None
        Label:
            text: "Welcome to AudioChef.\nIn the future you'll be able to create recipes for me to cook"
            height: 50
            size_hint_y: None
            text_size: self.width, None
            size: self.texture_size
        Button:
            text: "GO"
            height: 25
            size_hint_y: None
            on_release: root.execute_recipe()
        Label:
            text: 'Messages:'
            height: 50
            size_hint_y: None
            text_size: self.width, None
            size: self.texture_size
        Label:
            id: messages_label
            height: 50
            size_hint_y: None
            text_size: self.width, None
            size: self.texture_size
    Accordion:
        orientation: 'vertical'
        AccordionItem:
            title: 'File Name Changer'
            BoxLayout:
                orientation: 'vertical'
                OptionsBox:
                    id: ext_box
                OutputNameChanger:
                    id: name_changer
                    preview_callback: root.filename_preview
        AccordionItem:
            title: 'Added files'
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: "The files you chose are:"
                    height: 25
                    size_hint_y: None
                ScrollView:
                    GridLayout:
                        cols: 2
                        id: file_box
                        size_hint_y: None
        AccordionItem:
            title: 'Transformations'
            BoxLayout:
                orientation: 'vertical'
                pos_hint: {'top': 1}
                BoxLayout:
                    height: 25
                    size_hint_y: None
                    Label:
                        text: "Added transformations:"
                    Button:
                        text: '+'
                        on_release: root.add_tranform_item()
                BoxLayout:
                    orientation: 'vertical'
                    ScrollView:
                        Accordion:
                            id: transforms_box
                            orientation: 'vertical'
                            height: 75 + len(self.children) * 44
                            size_hint_y: None


<TransformationForm>:

    canvas.before:
        Color:
            rgb: (0, 0, 1)
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        height: 75
        size_hint_y: None
        pos_hint: {'top': 1}
        ScrollView:
            BoxLayout:
                id: transform_box
                size_hint_x: None
        ScrollView:
            BoxLayout:
                id: args_box
                size_hint_x: None
        Button:
            text: 'remove'
            on_release: root.remove()

<SelectableButton>:
    width: max(120, self.texture_size[0])
    size_hint_x: None

<Button>:
    background_color: 'grey'


<OutputNameChanger>:
    orientation: 'vertical'
    GridLayout:
        cols: 2
        Label:
            text: 'Choose file name change type:'
        Label:
        Label:
            text: 'Replace text'
        CheckBox:
            active: True
            group: 'name_changer'
            on_active: root.mode = 'replace'
        Label:
            text: 'Wildcards'
        CheckBox:
            group: 'name_changer'
            on_active: root.mode = 'wildcards'
    RelativeLayout:
        GridLayout:
            cols: 2
            Label:
                id: replace_from_label
                height: 25
                size_hint_y: None
                text: 'Replace this:'
            Label:
                id: replace_to_label
                height: 25
                size_hint_y: None
                text: 'With this:'
            TextInput:
                id: replace_from_input
                height: 25
                size_hint_y: None
                on_text: root.preview_callback()
            TextInput:
                id: replace_to_input
                height: 25
                size_hint_y: None
                text: ''
                on_text: root.preview_callback()
        BoxLayout:
            orientation: 'vertical'
            Label:
                id: wildcards_label
                height: 25
                size_hint_y: None
                text: 'Output Format:'
            TextInput:
                id: wildcards_input
                height: 25
                size_hint_y: None
                on_text: root.preview_callback()


<ValidatedInput>:
    size_hint_y: None
    height: input_label.height
    Label:
        id: input_label
        text: root.name
        text_size: self.width, None
        height: max(25, self.texture_size[1])
        size_hint_y: None
    TextInput:
        id: text_input
        text: root.text
        height: input_label.height
        size_hint_y: None
        on_text: root.text = self.text


<ArgumentBox>:
    width: 180
    size_hint_x: None


<FileLabel>:
    text_size: self.width, None
    size: self.texture_size