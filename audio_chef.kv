#:kivy 2.0.0

<AudioChefWindow>:
    orientation: 'vertical'
    name_changer: name_changer
    ext_box: ext_box
    transforms_box: transforms_box
    presets_box: presets_box
    file_box: file_box
    BoxLayout:
        orientation: 'vertical'
        height: 175
        size_hint_y: None
        Label:
            text: "Welcome to AudioChef.\nIn the future you'll be able to create recipes for me to cook"
            height: 50
            size_hint_y: None
            text_size: self.width, None
            size: self.texture_size
        BoxLayout:
            height: 25
            size_hint_y: None
            Button:
                text: 'Save'
                on_release: root.save_preset()
            Button:
                text: "GO"
                on_release: root.execute_preset()
        Label:
            text: 'Messages:'
            height: 50
            size_hint_y: None
            text_size: self.width, None
            size: self.texture_size
        Label:
            id: messages_label
            height: 50
            size_hint_y: None
            text_size: self.width, None
            size: self.texture_size
    Accordion:
        AccordionItem:
            title: 'Presets'
            BoxLayout:
                id: presets_box
                orientation: 'vertical'
        AccordionItem:
            title: 'Current preset'
            Accordion:
                orientation: 'vertical'
                AccordionItem:
                    title: 'File Name Changer'
                    BoxLayout:
                        orientation: 'vertical'
                        OptionsBox:
                            id: ext_box
                        OutputChanger:
                            id: name_changer
                            preview_callback: root.filename_preview
                AccordionItem:
                    title: 'Added files'
                    BoxLayout:
                        orientation: 'vertical'
                        Label:
                            text: "The files you chose are:"
                            height: 25
                            size_hint_y: None
                        ScrollView:
                            GridLayout:
                                cols: 2
                                id: file_box
                                size_hint_y: None
                AccordionItem:
                    title: 'Transformations'
                    BoxLayout:
                        orientation: 'vertical'
                        pos_hint: {'top': 1}
                        BoxLayout:
                            height: 25
                            size_hint_y: None
                            Label:
                                text: "Added transformations:"
                            Button:
                                text: '+'
                                on_release: root.add_tranform_item()
                        BoxLayout:
                            orientation: 'vertical'
                            ScrollView:
                                BoxLayout:
                                    id: transforms_box
                                    orientation: 'vertical'
                                    height: 75 * len(self.children)
                                    size_hint_y: None


<TransformationForm>:
    orientation: 'vertical'
    height: 75
    size_hint_y: None
    pos_hint: {'top': 1}
    ScrollView:
        BoxLayout:
            id: transform_box
            size_hint_x: None
    ScrollView:
        BoxLayout:
            id: args_box
            size_hint_x: None
    Button:
        text: 'remove'
        on_release: root.remove()

<SelectableButton>:
    width: max(120, self.texture_size[0])
    size_hint_x: None

<Button>:
    background_color: 'grey'


<OutputChanger>:
    orientation: 'vertical'
    GridLayout:
        cols: 2
        Label:
            text: 'Choose file name change type:'
        Label:
        Label:
            text: 'Replace text'
        CheckBox:
            active: root.mode == 'replace'
            group: 'name_changer'
            on_active: root.mode = 'replace'
        Label:
            text: 'Wildcards'
        CheckBox:
            active: root.mode == 'wildcards'
            group: 'name_changer'
            on_active: root.mode = 'wildcards'
    RelativeLayout:
        GridLayout:
            cols: 2
            Label:
                id: replace_from_label
                height: 25
                size_hint_y: None
                text: 'Replace this:'
            Label:
                id: replace_to_label
                height: 25
                size_hint_y: None
                text: 'With this:'
            TextInput:
                id: replace_from_input
                height: 25
                size_hint_y: None
                on_text: root.preview_callback()
            TextInput:
                id: replace_to_input
                height: 25
                size_hint_y: None
                text: ''
                on_text: root.preview_callback()
        BoxLayout:
            orientation: 'vertical'
            Label:
                id: wildcards_label
                height: 25
                size_hint_y: None
                text: 'Output Format:'
            TextInput:
                id: wildcards_input
                height: 25
                size_hint_y: None
                on_text: root.preview_callback()


<ValidatedInput>:
    text: text_input.text
    size_hint_y: None
    height: max(input_label.height, text_input.height)
    Label:
        id: input_label
        text: root.name
        height: max(25, self.texture_size[1])
        width: self.texture_size[0] + 10
        size_hint: None, None
    TextInput:
        id: text_input
        text: root.text
        height: self.minimum_height


<ArgumentBox>:
    width: 240
    size_hint_x: None
    text: str(slider.value)
    Slider:
        id: slider
        min: 0
        max: 100
        value: root.text
        step: 10


<FileLabel>:
    text_size: self.width, None
    size: self.texture_size